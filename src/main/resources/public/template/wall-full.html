<div class="row">
    <div class="six cell">
        <h1><i class="collaborative-wall"></i><i18n ng-click="closeWallFullScreen()">collaborativewall.title</i18n></h1>
    </div>
    <div class="six cell contextual-buttons">
        <a class="button cell right-magnet" ng-href="/collaborativewall/print/wall#/print/[[wall._id]]" target="_blank" workflow="collaborativewall.print">
            <i18n>collaborativewall.print</i18n>
        </a>
        <button class="cell right-magnet" ng-click="addNote()"><i18n>collaborativewall.note.create</i18n></button>
    </div>
</div>

<div class="row">
    <div class="one cell">
        <img skin-src="/img/illustrations/collaborative-wall-default.png" ng-if="wall.icon === undefined" />
        <img ng-src="[[wall.icon]]?thumbnail=120x120" ng-if="wall.icon !== undefined" />
    </div>
    <div class="eleven cell">
        <h2>[[wall.name]]</h2>
        <p>[[wall.description]]</p>
    </div>
</div>

<board class="board">
    <sticky ng-repeat="n in wall.notes" class="note" ng-dblclick="editNote(n, $event)">
        <div class="row note-top">
            <behaviour name="contrib" resource="wall">
                <div class="twelve cell draggable">&nbsp;</div>
            </behaviour>
            <div class="cell note-top-button">
                <img src="/collaborativewall/public/img/edit.png" ng-if="hasRight(wall, n)" ng-click="editNote(n, $event)"></i>
                <img src="/collaborativewall/public/img/delete.png" ng-if="hasRight(wall, n)" ng-click="confirmRemoveNote($index, $event)"></i>
            </div>
        </div>
        <div class="row note-content">
            <div class="twelve cell" ng-if="n === note">
                <html-inline-editor ng-model="note.content"></html-inline-editor>
                <input type="button" class="right-magnet" i18n-value="save" ng-click="saveNote()" />
                <input type="button" class="right-magnet cancel" i18n-value="cancel" ng-click="cancelNote()" />
            </div>
            <div ng-if="n !== note" bind-html="n.content"></div>
        </div>
        <div class="row note-bottom">
            <div class="row"><small><a ng-href="/userbook/annuaire#[[n.owner.userId]]">[[n.owner.username]]</a></small></div>
            <div class="row"><small>[[n.lastEdit | date:"dd/MM/yyyy 'Ã ' H:mm"]]</small></div>
        </div>
    </sticky>
</board>

<!-- Allows to display a confirm dialog before deleting a note -->
<lightbox show="display.confirmDeleteNote" on-close="cancelRemoveNote()">
    <article>
        <div class="row">
            <i18n>collaborativewall.note.delete.confirm</i18n>
        </div>
        <div class="row">
            <button class="right-magnet" ng-click="removeNote()"><i18n>remove</i18n></button>
            <input type="button" class="cancel right-magnet" i18n-value="cancel" ng-click="cancelRemoveNote()" />
        </div>
    </article>
</lightbox>
